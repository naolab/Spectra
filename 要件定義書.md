# AIスクリーン共有エージェント 要件定義書（v1.0）

## 1. プロダクト概要
本システムは、AI（GPT / Claude など）がローカルPCに対して
「画面を見て」「Unity画面見て」「このUIの崩れを直して」などの指示を行うと、
指定された画面領域（ウィンドウ/ディスプレイ/任意矩形）を自動キャプチャし、
AIに画像データとして返却するためのツールである。

GUIアプリでキャプチャ対象の設定を行い、
AIからのアクセスは MCP（Model Context Protocol）を経由する。

---

## 2. ゴール（目的）
### 人間の手動操作なしで AI にローカルPC画面を自動的に共有できるようにする。
- スクショ選択/送信の手間をゼロにする
- 特定アプリケーションのウィンドウだけキャプチャできる
- AIが勝手に capture_latest_screen() を呼んで解析できる

---

## 3. 対象プラットフォーム
- **v1：macOS**
- **v2：Windows（追加予定）**
- **v3：Linux（必要に応じて）**

キャプチャ処理は OSごとにネイティブコードを使用するが、
GUI + MCP サーバーはクロスプラットフォームで動作する。

---

## 4. 想定ユーザー
- Webフロントエンド開発者  
- ゲーム開発者（Unity/Unreal）  
- UI/UX デザイナー  
- AIサポート前提のプログラマー  
- 画面をAIに解析させたい全ユーザー

---

## 5. 主要ユースケース

### 5.1 特定ウィンドウのキャプチャ
- Unity Game View
- Chrome
- VSCode
- Terminal 等

### 5.2 ディスプレイ単位でのキャプチャ
- サブモニタだけAIに送る

### 5.3 任意領域のキャプチャ
- GUIでドラッグして領域指定可能にする

### 5.4 AIが自然言語で画面参照
例：
画面共有見て
Unityのゲーム画面バグってない？
Chromeのログイン画面読んで

yaml
コードをコピーする
→ AI が MCP の capture_latest() を自動呼び出し

---

## 6. 機能要件（Functional Requirements）

### 6.1 GUI機能
- ウィンドウ一覧取得＆表示
- キャプチャ対象ウィンドウの選択
- ディスプレイ選択
- 任意矩形領域の選択
- settings.jsonに保存
- macOSの画面収録権限の確認＆案内
- 起動時に前回設定を復元

---

### 6.2 MCP サーバー機能
#### 必須メソッド
- screen.capture_latest()
- screen.capture_window(windowId or name)
- screen.list_windows()
- screen.capture_region(x, y, width, height)
- settings.get()
- settings.set()

#### 動作要件
- 標準I/OでAIクライアントと通信
- 画像バッファを WebP/JPEG で返却
- キャプチャは必要時のみ実行（常時録画はしない）

---

### 6.3 キャプチャ機能（macOS）
- 特定ウィンドウ単体のスクリーンショット
- 特定ディスプレイのフルスクリーンキャプチャ
- 任意領域の切り抜き
- 高速フォーマット（JPEG/WebP）でのエンコード

---

## 7. 非機能要件（NFR）

### 7.1 性能要件
- 単発キャプチャは 100ms 以内
- 1fpsキャプチャでも CPU 利用 1〜5%
- AI応答まで1秒以内を目標

### 7.2 安全性
- キャプチャ画像はすべてローカル処理
- MCPサーバーはローカルプロセスのみ
- 外部ネットワークに公開しない

### 7.3 拡張性
- Capture層を mac/win/linux で差し替え可能
- GUIとMCPサーバーはコード共通
- 設定ファイル(settings.json)も共通仕様

---

## 8. 制約条件
- macOSでは画面収録権限が必須
- Electronを動かすため Node.js 同梱が必要
- Swiftコードは macOS にのみ依存

---

## 9. リリース範囲（v1）
- macOS GUI + MCP サーバー + macキャプチャ層
- Windows/Linux 版は未実装（v2以降）

---

## 10. 今後の拡張
- Windowsキャプチャ（DXGI）追加
- Linuxキャプチャ（X11/Wayland）追加
- AIからの録画（動画キャプチャ）※負荷に注意
- OCR機能との連携
- AIによる自動ウィンドウ選択機能